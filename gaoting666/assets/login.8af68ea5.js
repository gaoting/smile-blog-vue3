import{d as e,a,r as s,s as l,l as r,P as u,o as t,H as o,b as d,e as p,h as n,J as m,u as c,I as f,Q as i,v as w,R as b,w as v,D as g,_ as N}from"./index.b3b0bea4.js";import{Y as _,Z as y}from"./axios.a2686a6a.js";import{m as k}from"./http.244fba9c.js";const I={class:"box"},h=v(" 记住密码 "),K=v("登录"),U=v("注册"),S=N(e({__name:"login",setup(e){let v=a("1");const N=s({userName:"",pwd:"",remember:!0}),S=s({userName1:"",pwd1:"",pwd2:""}),q=k();l(q);const x=r(),z=u("reload"),j=async()=>{const{userName:e,pwd:a,remember:s,userInfo:l}=N,r=await _({userName:e,pwd:a});200===r.code&&(g.success(r.message),q.changeToken(r.token),q.getLoginInfo({userName:e,pwd:a,userInfo:r.userInfo}),localStorage.setItem("token",r.token),localStorage.setItem("userName",r.userName),s&&localStorage.setItem("userInfo",JSON.stringify({userName:e,pwd:a,userInfo:r.userInfo})),x.push({path:"/"}),z())},J=async()=>{const{userName1:e,pwd2:a,pwd1:s}=S;if(a!==s)return void g.error("俩次输入的密码不一致，请重新输入");200===(await y({userName:e,pwd:s})).code&&(g.success("注册成功！"),N.userName=e,N.pwd=s,j())};return t((()=>{let e=localStorage.getItem("userInfo");if(e){let a=JSON.parse(e);N.userName=a.userName,N.pwd=a.pwd}})),(e,a)=>{const s=o("a-input"),l=o("a-form-item"),r=o("a-input-password"),u=o("a-checkbox"),t=o("a-button"),g=o("a-form"),_=o("a-tab-pane"),y=o("a-tabs");return d(),p("div",I,[n(y,{activeKey:c(v),"onUpdate:activeKey":a[6]||(a[6]=e=>b(v)?v.value=e:v=e),type:"card"},{default:m((()=>[n(_,{key:"1",tab:"登  录"},{default:m((()=>[1==c(v)?(d(),f(g,{key:0,model:N,"label-col":{span:5},"wrapper-col":{span:15}},{default:m((()=>[n(l,{label:"用户名",name:"userName",rules:[{required:!0,message:"请输入用户名"}]},{default:m((()=>[n(s,{value:N.userName,"onUpdate:value":a[0]||(a[0]=e=>N.userName=e),size:"large"},null,8,["value"])])),_:1}),n(l,{label:"密码",name:"pwd",rules:[{required:!0,message:"请输入密码"}]},{default:m((()=>[n(r,{value:N.pwd,"onUpdate:value":a[1]||(a[1]=e=>N.pwd=e),size:"large",onKeyup:i(j,["enter"])},null,8,["value","onKeyup"])])),_:1}),n(l,{name:"remember","wrapper-col":{offset:1,span:12}},{default:m((()=>[n(u,{checked:N.remember,"onUpdate:checked":a[2]||(a[2]=e=>N.remember=e)},{default:m((()=>[h])),_:1},8,["checked"])])),_:1}),n(l,{"wrapper-col":{offset:5,span:15}},{default:m((()=>[n(t,{type:"success",onClick:j,block:""},{default:m((()=>[K])),_:1})])),_:1})])),_:1},8,["model"])):w("",!0)])),_:1}),n(_,{key:"2",tab:"注  册"},{default:m((()=>[2==c(v)?(d(),f(g,{key:0,model:S,"label-col":{span:5},"wrapper-col":{span:15}},{default:m((()=>[n(l,{label:"用户名",name:"userName1",rules:[{required:!0,message:"请输入用户名"}]},{default:m((()=>[n(s,{value:S.userName1,"onUpdate:value":a[3]||(a[3]=e=>S.userName1=e),size:"large"},null,8,["value"])])),_:1}),n(l,{label:"密码",name:"pwd1",rules:[{required:!0,message:"请输入密码"}]},{default:m((()=>[n(r,{value:S.pwd1,"onUpdate:value":a[4]||(a[4]=e=>S.pwd1=e),size:"large"},null,8,["value"])])),_:1}),n(l,{label:"确认密码",name:"pwd2",rules:[{required:!0,message:"请再次输入密码"}]},{default:m((()=>[n(r,{value:S.pwd2,"onUpdate:value":a[5]||(a[5]=e=>S.pwd2=e),size:"large",onKeyup:i(J,["enter"])},null,8,["value","onKeyup"])])),_:1}),n(l,{"wrapper-col":{offset:5,span:15}},{default:m((()=>[n(t,{type:"success",onClick:J,block:""},{default:m((()=>[U])),_:1})])),_:1})])),_:1},8,["model"])):w("",!0)])),_:1})])),_:1},8,["activeKey"])])}}}),[["__scopeId","data-v-5fe6e39a"]]);export{S as default};
