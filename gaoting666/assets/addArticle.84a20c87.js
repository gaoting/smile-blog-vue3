import{U as e,V as a,P as t}from"./axios.a2686a6a.js";import{d as l,a as s,r as o,K as n,l as u,s as r,o as i,H as d,b as p,e as c,h as m,J as v,u as f,w as y,D as h,_ as g}from"./index.b3b0bea4.js";import{m as w}from"./http.244fba9c.js";const b={class:"article"},_=y("返回"),x=y("提交"),C=g(l({__name:"addArticle",props:{newData:{type:Object,default:{}}},setup(l){s(""),o({style:{width:"150px"}}),o({span:20});let y=s({author:"smile",tags:null,types:null,title:"",description:"",content:"",picture:""});const g=(e,a,t)=>{},C=async()=>{const t=document.querySelector(".vuepress-markdown-body img");y.value.picture=t?t.src:"";const l=document.querySelector(".vuepress-markdown-body p");if(y.value.description=l?l.innerText:"",k.query.id){200==(await e(y.value)).code&&(h.success("文章更新成功"),L.go(-1))}else{200===(await a(y.value)).code&&(h.success("文章创建成功"),y.value={author:"smile",tags:null,types:null,title:"",description:"",content:"",picture:""})}};let U=o([]),q=o([]);const z=(e,a)=>a.label.toLowerCase().indexOf(e.toLowerCase())>=0,j=(e,a)=>a.label.toLowerCase().indexOf(e.toLowerCase())>=0,k=n(),L=u(),V=w();return r(V),i((()=>{V.types.forEach((e=>{let a={label:e.name,value:e.id};a.value&&q.push(a)})),V.tags.forEach((e=>{let a={label:e.name,value:e.id};U.push(a)})),k.query.id&&(async e=>{const a=await t({id:+e});y.value={...y.value,...a.data}})(k.query.id)})),(e,a)=>{const t=d("a-input"),l=d("a-col"),s=d("a-select"),o=d("a-button"),n=d("a-row"),u=d("v-md-editor");return p(),c("div",b,[m(n,null,{default:v((()=>[m(l,{span:8},{default:v((()=>[m(t,{size:"large",value:f(y).title,"onUpdate:value":a[0]||(a[0]=e=>f(y).title=e),placeholder:"标题"},null,8,["value"])])),_:1}),m(l,{span:6},{default:v((()=>[m(s,{size:"large",placeholder:"标签",value:f(y).tags,"onUpdate:value":a[1]||(a[1]=e=>f(y).tags=e),"show-search":"",options:f(U),"filter-option":z},null,8,["value","options"])])),_:1}),m(l,{span:5},{default:v((()=>[m(s,{size:"large",placeholder:"分类",value:f(y).types,"onUpdate:value":a[2]||(a[2]=e=>f(y).types=e),"show-search":"",options:f(q),"filter-option":j},null,8,["value","options"])])),_:1}),m(l,{span:5,class:"flex-row-end"},{default:v((()=>[m(o,{onClick:a[3]||(a[3]=e=>f(L).go(-1)),size:"large"},{default:v((()=>[_])),_:1}),m(o,{type:"primary",onClick:C,style:{"margin-left":"10px"},size:"large"},{default:v((()=>[x])),_:1})])),_:1})])),_:1}),m(u,{modelValue:f(y).content,"onUpdate:modelValue":a[4]||(a[4]=e=>f(y).content=e),"disabled-menus":[],onUploadImage:g,height:"800px"},null,8,["modelValue"])])}}}),[["__scopeId","data-v-251472f1"]]);export{C as default};
